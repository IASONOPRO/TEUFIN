<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TEUFIN - Agenda communautaire événementiel</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- AJOUT : SDK Supabase -->
    <script type="module">
        import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm'
        window.supabase = createClient('https://jxybzfavctvdoxftqcli.supabase.co', 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imp4eWJ6ZmF2Y3R2ZG94ZnRxY2xpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM0MjgyNDUsImV4cCI6MjA2OTAwNDI0NX0.fxqkve6UVvQuLSyr43mojz2vnKIvVgi3D6RvaXJiqU8')
    </script>
    <!-- FIN AJOUT -->
    <style>
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@800&display=swap');
        /* RESET & BASE STYLES */
        *{margin:0;padding:0;box-sizing:border-box}
        :root{
            /* MODE CLAIR (défaut) */
            --bg-light:#f8f5f2;
            --bg-secondary-light:#ffffff;
            --text-primary-light:#333333;
            --text-secondary-light:#666666;
            --accent-color-light:#a78bfa;
            --neon-pink-light:#d8b4fe;
            --neon-blue-light:#93c5fd;
            --neon-green-light:#86efac;

            /* MODE SOMBRE (existant) */
            --bg-dark:#0a0a0a;
            --bg-secondary-dark:#111111;
            --text-primary-dark:#ffffff;
            --text-secondary-dark:#b3b3b3;
            --accent-color-dark:#ff00ff;
            --neon-pink-dark:#ff00ff;
            --neon-blue-dark:#00ffff;
            --neon-green-dark:#39ff14;

            /* Variables dynamiques */
            --bg:var(--bg-light);
            --bg-secondary:var(--bg-secondary-light);
            --text-primary:var(--text-primary-light);
            --text-secondary:var(--text-secondary-light);
            --accent-color:var(--accent-color-light);
            --neon-pink:var(--neon-pink-light);
            --neon-blue:var(--neon-blue-light);
            --neon-green:var(--neon-green-light);
            --transition:all .3s ease
        }

        /* MODE SOMBRE */
        body[data-theme="dark"]{
            --bg:var(--bg-dark);
            --bg-secondary:var(--bg-secondary-dark);
            --text-primary:var(--text-primary-dark);
            --text-secondary:var(--text-secondary-dark);
            --accent-color:var(--accent-color-dark);
            --neon-pink:var(--neon-pink-dark);
            --neon-blue:var(--neon-blue-dark);
            --neon-green:var(--neon-green-dark);
        }

        body{
            font-family:'Montserrat',sans-serif;
            background-color:var(--bg);
            color:var(--text-primary);
            line-height:1.6;
            overflow-x:hidden;
            transition:var(--transition);
        }
        a{text-decoration:none;color:inherit}
        ul{list-style:none}
        .container{width:100%;max-width:1200px;margin:0 auto;padding:0 20px}
        .btn{
            display:inline-block;padding:12px 30px;
            background:transparent;border:2px solid var(--accent-color);
            color:var(--text-primary);font-weight:600;text-transform:uppercase;
            letter-spacing:1px;cursor:pointer;position:relative;overflow:hidden;z-index:1;
            transition:var(--transition)
        }
        .btn::before{
            content:'';position:absolute;top:0;left:0;width:0;height:100%;
            background:var(--accent-color);transition:var(--transition);z-index:-1
        }
        .btn:hover::before{width:100%}
        .btn:hover{color:var(--bg);box-shadow:0 0 15px var(--accent-color)}

        /* SWITCH THEME — repositionné dans le header */
        #theme-switch{
            width:30px;
            height:15px;
            background:#e5e7eb;
            border-radius:15px;
            cursor:pointer;
            transition:var(--transition);
            box-shadow:0 2px 10px rgba(0,0,0,.1);
            margin-left:12px;
            vertical-align:middle;
            position:relative;          /* ← ajouté pour que le rond soit bien positionné */
        }
        body[data-theme="dark"] #theme-switch{
            background:#374151;
        }
        #theme-switch::before{
            content:'';
            position:absolute;
            top:2px;
            left:3px;
            width:12px;
            height:12px;
            background:#a78bfa;
            border-radius:50%;
            transition:var(--transition);
            box-shadow:0 2px 5px rgba(0,0,0,.2);
        }
        body[data-theme="dark"] #theme-switch::before{
            transform:translateX(10px);
            background:#ff00ff;
        }

        /* HEADER */
        header{
            position:fixed;top:0;left:0;width:100%;padding:20px 0;
            z-index:1000;transition:var(--transition);
            background-color:rgba(248,245,242,.8);backdrop-filter:blur(10px);
            transition:var(--transition);
        }
        body[data-theme="dark"] header{
            background-color:rgba(10,10,10,.8);
        }
        header.scrolled{padding:10px 0;background-color:rgba(248,245,242,.95)}
        body[data-theme="dark"] header.scrolled{background-color:rgba(10,10,10,.95)}
        .navbar{display:flex;justify-content:space-between;align-items:center}
        .logo{font-size:24px;font-weight:700;color:var(--text-primary);letter-spacing:2px;display:flex;align-items:center}
        .logo span{color:var(--accent-color)}
        .nav-links{display:flex;gap:30px}
        .nav-links li a{position:relative;padding:5px 0;transition:var(--transition)}
        .nav-links li a::after{
            content:'';position:absolute;bottom:0;left:0;width:0;height:2px;
            background-color:var(--accent-color);transition:var(--transition)
        }
        .nav-links li a:hover{color:var(--accent-color)}
        .nav-links li a:hover::after{width:100%}
        .hamburger{display:none;cursor:pointer}
        .hamburger div{width:25px;height:3px;background-color:var(--text-primary);margin:5px 0;transition:var(--transition)}

        /* HERO */
        .hero{
            height:100vh;display:flex;align-items:center;justify-content:center;
            text-align:center;position:relative;overflow:hidden;
            background:linear-gradient(rgba(248,245,242,.7),rgba(248,245,242,.7)),
            url('https://images.unsplash.com/photo-1571266028243-4ddd7e6fab1b?auto=format&fit=crop&w=1470&q=80');
            background-size:cover;background-position:center;background-attachment:fixed;
            transition:var(--transition);
        }
        body[data-theme="dark"] .hero{
            background:linear-gradient(rgba(0,0,0,.7),rgba(0,0,0,.7)),
            url('https://images.unsplash.com/photo-1571266028243-4ddd7e6fab1b?auto=format&fit=crop&w=1470&q=80');
            background-size:cover;background-position:center;background-attachment:fixed
        }
        .hero-content{max-width:800px;padding:0 20px;animation:fadeIn 1.5s ease-in-out}
        /* ===== TEUFIN moderne et arrondi ===== */
.hero h1{
    font-family:'Poppins',sans-serif;
    font-weight:800;
    font-size:clamp(3.5rem,8vw,7.5rem);
    letter-spacing:.05em;
    text-transform:uppercase;
    color:var(--text-primary);
    margin-bottom:20px;
    position:relative;
    text-shadow:
        0 0 4px var(--text-primary),
        0 0 8px var(--text-primary),
        0 0 15px var(--neon-pink),
        0 0 30px var(--neon-pink),
        0 0 50px var(--neon-pink);
    animation:breath 2.2s ease-in-out infinite alternate;
}
@keyframes breath{
    from{text-shadow:0 0 4px var(--text-primary),0 0 8px var(--text-primary),0 0 15px var(--neon-pink),0 0 30px var(--neon-pink),0 0 50px var(--neon-pink);}
    to{transform:scale(1.02);text-shadow:0 0 6px var(--text-primary),0 0 12px var(--text-primary),0 0 25px var(--neon-pink),0 0 50px var(--neon-pink),0 0 90px var(--neon-pink);}
}
        .hero p{font-size:1.5rem;margin-bottom:30px;color:var(--text-secondary)}
        .hero-btns{display:flex;gap:20px;justify-content:center;flex-wrap:wrap}

        /* SECTIONS */
        section{padding:100px 0}
        .section-title{text-align:center;margin-bottom:60px;position:relative}
        .section-title h2{font-size:2.5rem;font-weight:700;margin-bottom:15px;text-transform:uppercase;letter-spacing:2px}
        .section-title span{color:var(--accent-color)}
        .section-title p{color:var(--text-secondary);max-width:600px;margin:0 auto}
        .section-title::after{
            content:'';position:absolute;bottom:-15px;left:50%;transform:translateX(-50%);
            width:80px;height:3px;background:var(--accent-color)
        }

        /* AGENDA */
        .agenda{background-color:var(--bg-secondary)}
        .agenda-filters{display:flex;justify-content:center;gap:15px;margin-bottom:40px;flex-wrap:wrap}
        .filter-btn{
            padding:10px 20px;background:transparent;border:1px solid var(--text-secondary);
            color:var(--text-secondary);cursor:pointer;border-radius:30px;transition:var(--transition)
        }
        .filter-btn.active,.filter-btn:hover{background-color:var(--accent-color);border-color:var(--accent-color);color:var(--bg)}
        .events-container{
    display:grid;
    grid-template-columns:repeat(auto-fill, 220px); /* cartes de 220px */
    gap:25px;
    justify-content:center;   /* centre la grille entière */
    margin-top:50px;
        }
        .event-card{
    max-width:220px;            
    margin:0 auto; 
            background-color:var(--bg-secondary);border-radius:10px;overflow:hidden;
            box-shadow:0 5px 15px rgba(0,0,0,.1);transition:var(--transition);position:relative
        }
        .event-card:hover{transform:translateY(-10px);box-shadow:0 15px 30px rgba(167,139,250,.2)}
        body[data-theme="dark"] .event-card:hover{box-shadow:0 15px 30px rgba(255,0,255,.2)}
        .event-img{height:120px;width:100%;object-fit:cover}
        .event-content{padding:20px}
        .event-date{color:var(--accent-color);font-size:.9rem;margin-bottom:10px;display:block}
        .event-title{font-size:1.1rem;margin-bottom:10px}
        .event-location{color:var(--text-secondary);margin-bottom:15px;display:flex;align-items:center;gap:5px}
        .event-actions{display:flex;justify-content:space-between;align-items:center}
        .event-actions .btn{padding:8px 16px;font-size:.9rem}

        /* SUBMIT EVENT */
        .submit-event{background-color:var(--bg);position:relative}
        .submit-event::before{
            content:'';position:absolute;top:0;left:0;width:100%;height:100%;
            background:url('https://images.unsplash.com/photo-1470229722913-7c0e2dbbafd3?auto=format&fit=crop&w=1470&q=80');
            background-size:cover;background-position:center;opacity:.1;z-index:0
        }
        .event-form{max-width:600px;margin:0 auto;background-color:var(--bg-secondary);padding:40px;border-radius:10px;box-shadow:0 0 20px rgba(0,0,0,.1);position:relative;z-index:1}
        .form-group{margin-bottom:25px}
        .form-group label{display:block;margin-bottom:8px;font-weight:500}
        .form-control{
            width:100%;padding:12px 15px;background-color:var(--bg-secondary);
            border:1px solid #d1d5db;border-radius:5px;color:var(--text-primary);
            font-family:inherit;transition:var(--transition)
        }
        body[data-theme="dark"] .form-control{
            background-color:rgba(30,30,30,.8);
            border:1px solid #333;
        }
        .form-control:focus{outline:none;border-color:var(--accent-color);box-shadow:0 0 0 2px rgba(167,139,250,.3)}
        body[data-theme="dark"] .form-control:focus{box-shadow:0 0 0 2px rgba(255,0,255,.3)}
        textarea.form-control{resize:vertical;min-height:100px}

        /* GALLERY */
        .gallery{background-color:var(--bg-secondary)}
        .gallery-container{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:15px}
        .gallery-item{position:relative;overflow:hidden;border-radius:5px;height:250px}
        .gallery-img{width:100%;height:100%;object-fit:cover;transition:var(--transition)}
        .gallery-overlay{
            position:absolute;top:0;left:0;width:100%;height:100%;
            background:rgba(167,139,250,.3);display:flex;align-items:center;justify-content:center;
            opacity:0;transition:var(--transition)
        }
        body[data-theme="dark"] .gallery-overlay{background:rgba(255,0,255,.3)}
        .gallery-item:hover .gallery-img{transform:scale(1.1);filter:brightness(.7)}
        .gallery-item:hover .gallery-overlay{opacity:1}
        .gallery-overlay i{font-size:2rem;color:var(--text-primary)}

        /* LOGIN MODAL */
        .modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.8);z-index:2000;align-items:center;justify-content:center;animation:fadeIn .3s ease-in-out}
        .modal-content{background-color:var(--bg-secondary);width:100%;max-width:400px;padding:40px;border-radius:10px;box-shadow:0 0 20px rgba(0,0,0,.5);position:relative;animation:slideUp .3s ease-in-out}
        .close-modal{position:absolute;top:15px;right:15px;font-size:1.5rem;cursor:pointer;color:var(--text-secondary);transition:var(--transition)}
        .close-modal:hover{color:var(--accent-color)}
        .modal-tabs{display:flex;margin-bottom:20px;border-bottom:1px solid #d1d5db}
        body[data-theme="dark"] .modal-tabs{border-bottom:1px solid #333}
        .modal-tab{flex:1;text-align:center;padding:10px;cursor:pointer}
        .modal-tab.active{border-bottom:2px solid var(--accent-color);color:var(--accent-color)}
        .tab-content{display:none}
        .tab-content.active{display:block;animation:fadeIn .3s ease-in-out}

        /* FOOTER */
        footer{background-color:var(--bg-secondary);padding:50px 0 20px;text-align:center}
        .footer-content{display:flex;flex-direction:column;align-items:center;gap:20px;margin-bottom:30px}
        .social-links{display:flex;gap:15px}
        .social-links a{display:flex;align-items:center;justify-content:center;width:40px;height:40px;background-color:rgba(167,139,250,.1);border-radius:50%;transition:var(--transition)}
        body[data-theme="dark"] .social-links a{background-color:rgba(255,255,255,.1)}
        .social-links a:hover{background-color:var(--accent-color);transform:translateY(-5px)}
        .copyright{color:var(--text-secondary);font-size:.9rem}

        /* ANIMATIONS */
        @keyframes fadeIn{from{opacity:0}to{opacity:1}}
        @keyframes slideUp{from{transform:translateY(50px);opacity:0}to{transform:translateY(0);opacity:1}}
        .fade-in{opacity:0;transform:translateY(30px);transition:opacity .6s ease,transform .6s ease}
        .fade-in.appear{opacity:1;transform:translateY(0)}

        /* RESPONSIVE */
        @media screen and (max-width:480px){
            .nav-links{position:absolute;top:70px;right:-100%;width:100%;height:calc(100vh - 70px);background-color:var(--bg);flex-direction:column;align-items:center;justify-content:center;gap:40px;transition:var(--transition)}
            .nav-links.active{right:0}
            .hamburger{display:block}
            .hamburger.active div:nth-child(1){transform:rotate(-45deg) translate(-5px,6px)}
            .hamburger.active div:nth-child(2){opacity:0}
            .hamburger.active div:nth-child(3){transform:rotate(45deg) translate(-5px,-6px)}
            .hero h1{font-size:2.5rem}
            .hero p{font-size:1.2rem}
            .section-title h2{font-size:2rem}
            .events-container{grid-template-columns:1fr}
            .gallery-container{grid-template-columns:repeat(2,1fr)}
            #theme-switch{top:10px;right:10px}
        }
        @media screen and (max-width:480px){
            .hero-btns{flex-direction:column;width:100%;max-width:300pxmargin-left: auto;
        margin-right: auto;}
            .gallery-container{grid-template-columns:1fr}
        }

        /* ===== CARTE INTERACTIVE ===== */
        .map-section{background-color:var(--bg-secondary);padding:100px 0}
        .map-wrapper{
            width:50%;
            max-width:600px;
            margin:0 auto;
            border-radius:10px;
            overflow:hidden;
            box-shadow:0 0 20px rgba(0,0,0,.1)
        }
        body[data-theme="dark"] .map-wrapper{box-shadow:0 0 20px rgba(0,0,0,.4)}
        #event-map{width:100%;height:400px;background:var(--bg-secondary)}
        @media (max-width:768px){.map-wrapper{width:90%}}
/* ===== WEBRADIO ===== */
.webradio{background-color:var(--bg);padding:100px 0;text-align:center}
.player-wrapper{max-width:600px;margin:0 auto 30px;border-radius:10px;overflow:hidden;box-shadow:0 0 20px rgba(167,139,250,.25)}
body[data-theme="dark"] .player-wrapper{box-shadow:0 0 20px rgba(255,0,255,.25)}
.player-cta{margin-top:25px}
    </style>
</head>
<body>
    <!-- HEADER -->
    <header>
        <div class="container">
            <nav class="navbar">
                <a href="#" class="logo">TEU<span>FIN</span>
                    <div id="theme-switch" aria-label="Changer de thème" role="switch" aria-checked="false"></div>
                </a>
                <ul class="nav-links">
                    <li><a href="#home">Accueil</a></li>
                    <li><a href="#agenda">Agenda</a></li>
                    <li><a href="#map-section">Carte</a></li>
                    <li><a href="#submit">Soumettre</a></li>
                    <li><a href="#" id="login-btn">Connexion</a></li>
                    <li><a href="#gallery">Galerie</a></li>
                    <li><a href="#about">À propos</a></li>
                </ul>
                <div class="hamburger">
                    <div></div><div></div><div></div>
                </div>
            </nav>
        </div>
    </header>

    <!-- HERO -->
    <section class="hero" id="home">
        <div class="hero-content">
            <h1>TEUFIN</h1>
            <p>L'agenda communautaire de tous les événements culturels et festifs underground</p>
            <div class="hero-btns">
                <a href="#agenda" class="btn">Voir l'agenda</a>
                <a href="#submit" class="btn">Ajouter ton événement</a>
            </div>
        </div>
    </section>

    <!-- AGENDA -->
    <section class="agenda" id="agenda">
        <div class="container">
            <div class="section-title fade-in">
                <h2>Agenda <span>événements</span></h2>
                <p>Découvre tous les événements à venir dans ta région</p>
            </div>
            <div class="agenda-filters fade-in">
                <button class="filter-btn active" data-filter="all">Tous</button>
                <button class="filter-btn" data-filter="concert">Concerts</button>
                <button class="filter-btn" data-filter="club">Club</button>
                <button class="filter-btn" data-filter="festival">Festivals</button>
                <button class="filter-btn" data-filter="expo">Expositions</button>
            </div>
            <div class="events-container" id="events-container"></div>
        </div>
    </section>

    <!-- CARTE -->
    <section class="map-section" id="map-section">
        <div class="container">
            <div class="section-title fade-in">
                <h2>Carte <span>des événements</span></h2>
                <p>Repère-les en un clin d'œil sur l'île de La Réunion</p>
            </div>
            <div class="map-wrapper fade-in">
                <div id="event-map"></div>
            </div>
        </div>
    </section>

    <!-- SUBMIT EVENT -->
    <section class="submit-event" id="submit">
        <div class="container">
            <div class="section-title fade-in">
                <h2>Soumettre un <span>événement</span></h2>
                <p>Partage ton événement avec la communauté TEUFIN</p>
            </div>
            <div style="text-align:center">
                <button type="button" id="toggle-form-btn" class="btn">
                    <i class="fas fa-plus-circle"></i> Soumettre un événement
                </button>
            </div>
            <div class="event-form fade-in" id="event-form-wrapper" style="display:none; margin-top:30px;">
                <form id="submit-event-form">
                    <div class="form-group">
                        <label for="event-title">Titre de l'événement *</label>
                        <input type="text" id="event-title" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="event-date">Date & Heure *</label>
                        <input type="datetime-local" id="event-date" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="event-location">Lieu *</label>
                        <input type="text" id="event-location" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="event-type">Type d'événement *</label>
                        <select id="event-type" class="form-control" required>
                            <option value="">Sélectionner un type</option>
                            <option value="concert">Concert</option>
                            <option value="club">Club</option>
                            <option value="festival">Festival</option>
                            <option value="expo">Exposition</option>
                            <option value="autre">Autre</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="event-description">Description</label>
                        <textarea id="event-description" class="form-control"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="event-ticket">Lien billetterie (optionnel)</label>
                        <input type="url" id="event-ticket" class="form-control" placeholder="https://...">
                    </div>
                    <div class="form-group">
                        <label for="event-facebook">Lien Facebook (optionnel)</label>
                        <input type="url" id="event-facebook" class="form-control" placeholder="https://facebook.com/events/...">
                    </div>
                    <div class="form-group">
                        <label for="event-image">Image de l'événement (optionnel)</label>
                        <input type="file" id="event-image" class="form-control" accept="image/*">
                    </div>
                    <button type="submit" class="btn">Soumettre l'événement</button>
                </form>
            </div>
        </div>
    </section>

    <!-- GALLERY -->
    <section class="gallery" id="gallery">
        <div class="container">
            <div class="section-title fade-in">
                <h2>Galerie <span>photos</span></h2>
                <p>Plongez dans l'ambiance des événements passés</p>
            </div>
            <div class="gallery-container fade-in">
                <div class="gallery-item">
                    <img src="https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?auto=format&fit=crop&w=1470&q=80" alt="Event" class="gallery-img">
                    <div class="gallery-overlay"><i class="fas fa-search-plus"></i></div>
                </div>
                <div class="gallery-item">
                    <img src="https://images.unsplash.com/photo-1506157786151-b8491531f063?auto=format&fit=crop&w=1470&q=80" alt="Event" class="gallery-img">
                    <div class="gallery-overlay"><i class="fas fa-search-plus"></i></div>
                </div>
                <div class="gallery-item">
                    <img src="https://images.unsplash.com/photo-1540575467063-178a50c2df87?auto=format&fit=crop&w=1470&q=80" alt="Event" class="gallery-img">
                    <div class="gallery-overlay"><i class="fas fa-search-plus"></i></div>
                </div>
                <div class="gallery-item">
                    <img src="https://images.unsplash.com/photo-1514525253161-7a46d19cd819?auto=format&fit=crop&w=1474&q=80" alt="Event" class="gallery-img">
                    <div class="gallery-overlay"><i class="fas fa-search-plus"></i></div>
                </div>
                <div class="gallery-item">
                    <img src="https://images.unsplash.com/photo-1524368535928-5b5e00ddc76b?auto=format&fit=crop&w=1470&q=80" alt="Event" class="gallery-img">
                    <div class="gallery-overlay"><i class="fas fa-search-plus"></i></div>
                </div>
                <div class="gallery-item">
                    <img src="https://images.unsplash.com/photo-1574375927938-d5a98e8ffe85?auto=format&fit=crop&w=1497&q=80" alt="Event" class="gallery-img">
                    <div class="gallery-overlay"><i class="fas fa-search-plus"></i></div>
                </div>
            </div>
        </div>
    </section>

    <section class="about" id="about">
        <div class="container">
            <div class="section-title fade-in">
                <h2>À <span>propos</span></h2>
                <p>Qui sommes-nous et que faisons-nous</p>
            </div>
            <div class="about-content fade-in">
                <p>TEUFIN est une plateforme communautaire dédiée à la promotion des événements culturels et festifs underground. Nous connectons artistes, organisateurs, bars, clubs et collectifs avec leur public.</p>
                <p>Notre mission est de créer un espace où la culture alternative peut s'épanouir et être accessible à tous. Rejoins la communauté et fais vivre la scène !</p>
            </div>
        </div>
    </section>

<!-- WEBRADIO -->
<section class="webradio" id="webradio">
    <div class="container">
        <div class="section-title fade-in">
            <h2>Webradio <span>TeuFin</span></h2>
            <p>Reste connecté·e à l'underground 24 h/24 via notre stream SoundCloud officiel.</p>
        </div>

        <div class="player-wrapper fade-in">
            <!-- Player SoundCloud intégré -->
            <iframe
                width="100%"
                height="166"
                scrolling="no"
                frameborder="no"
                allow="autoplay"
                src="https://w.soundcloud.com/player/?url=https%3A//soundcloud.com/teufinrec&amp;color=ff00ff&amp;auto_play=false&hide_related=false&show_comments=true&show_user=true&show_reposts=false&show_teaser=true">
            </iframe>
        </div>

        <div class="player-cta fade-in">
            <a href="https://soundcloud.com/teufinrec" target="_blank" class="btn">
                <i class="fab fa-soundcloud"></i> &nbsp;Écouter sur SoundCloud
            </a>
        </div>
    </div>
</section>

    <footer>
        <div class="container">
            <div class="footer-content">
                <a href="#" class="logo">TEU<span>FIN</span></a>
                <div class="social-links">
                    <a href="#"><i class="fab fa-facebook-f"></i></a>
                    <a href="#"><i class="fab fa-instagram"></i></a>
                    <a href="#"><i class="fab fa-twitter"></i></a>
                    <a href="#"><i class="fab fa-soundcloud"></i></a>
                </div>
            </div>
            <p class="copyright">&copy; 2023 TEUFIN. Tous droits réservés.</p>
        </div>
    </footer>

    <!-- MODAL AUTH -->
    <div class="modal" id="auth-modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <div class="modal-tabs">
                <div class="modal-tab active" data-tab="login">Connexion</div>
                <div class="modal-tab" data-tab="signup">Inscription</div>
            </div>
            <div class="tab-content active" id="login-tab">
                <form id="login-form">
                    <div class="form-group"><label>Email</label><input type="email" id="login-email" class="form-control" required></div>
                    <div class="form-group"><label>Mot de passe</label><input type="password" id="login-password" class="form-control" required></div>
                    <button type="submit" class="btn">Se connecter</button>
                </form>
            </div>
            <div class="tab-content" id="signup-tab">
                <form id="signup-form">
                    <div class="form-group"><label>Nom</label><input type="text" id="signup-name" class="form-control" required></div>
                    <div class="form-group"><label>Email</label><input type="email" id="signup-email" class="form-control" required></div>
                    <div class="form-group"><label>Mot de passe</label><input type="password" id="signup-password" class="form-control" required></div>
                    <div class="form-group"><label>Confirmer le mot de passe</label><input type="password" id="signup-confirm" class="form-control" required></div>
                    <button type="submit" class="btn">S'inscrire</button>
                </form>
            </div>
        </div>
    </div>

    <!-- SCRIPT CARTE + ORIGINAL + THEME -->
    <script>
        /* =========================================================
           AJOUT : variables globales Supabase
           --------------------------------------------------------- */
        // window.supabase déjà créé via <script type="module">
        /* FIN AJOUT */

        /* =========================================================
           THEME SWITCH
           --------------------------------------------------------- */
        const themeSwitch = document.getElementById('theme-switch');
        const body = document.body;

        // Initialisation du thème
        const savedTheme = localStorage.getItem('theme') || 'light';
        body.setAttribute('data-theme', savedTheme);
        themeSwitch.setAttribute('aria-checked', savedTheme === 'dark');

        themeSwitch.addEventListener('click', () => {
            const currentTheme = body.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            body.setAttribute('data-theme', newTheme);
            themeSwitch.setAttribute('aria-checked', newTheme === 'dark');
            localStorage.setItem('theme', newTheme);
        });

        /* =========================================================
           GOOGLE MAP
           --------------------------------------------------------- */
        const GOOGLE_MAPS_URL = 'https://maps.googleapis.com/maps/api/js?key=AIzaSyAXbEWY--24FsTGnH0cpQFGMwzBBO7dC2U';
        function loadGoogleMaps(){
            return new Promise((resolve,reject)=>{
                if(window.google&&window.google.maps)return resolve();
                const s=document.createElement('script');
                s.src=GOOGLE_MAPS_URL;
                s.onload=()=>resolve();
                s.onerror=()=>reject('Google Maps non chargé');
                document.head.appendChild(s);
            });
        }
        async function initMap(){
            await loadGoogleMaps();
            const reunion={lat:-21.1151,lng:55.5364};
            const map=new google.maps.Map(document.getElementById('event-map'),{
                zoom:10,
                center:reunion,
                styles:[
                    {elementType:'geometry',stylers:[{color:body.getAttribute('data-theme') === 'dark' ? '#111' : '#f8f5f2'}]},
                    {elementType:'labels.text.stroke',stylers:[{color:body.getAttribute('data-theme') === 'dark' ? '#111' : '#ffffff'}]},
                    {elementType:'labels.text.fill',stylers:[{color:body.getAttribute('data-theme') === 'dark' ? '#ff00ff' : '#a78bfa'}]},
                    {featureType:'road',elementType:'geometry',stylers:[{color:body.getAttribute('data-theme') === 'dark' ? '#222' : '#e5e7eb'}]},
                    {featureType:'water',elementType:'geometry',stylers:[{color:body.getAttribute('data-theme') === 'dark' ? '#000033' : '#e0f2fe'}]}
                ]
            });
            /* AJOUT : récupération dynamique des events */
            const { data: events } = await supabase.from('events').select('*');
            (events || []).forEach(ev => {
                new google.maps.Marker({
                    position: { lat: ev.lat || -21.1151, lng: ev.lng || 55.5364 },
                    map,
                    title: ev.title
                });
            });
            /* FIN AJOUT */
        }

        /* =========================================================
           RESTE DU JAVASCRIPT ORIGINAL
           --------------------------------------------------------- */
        const hamburger=document.querySelector('.hamburger');
        const navLinks=document.querySelector('.nav-links');
        const header=document.querySelector('header');
        const loginBtn=document.getElementById('login-btn');
        const authModal=document.getElementById('auth-modal');
        const closeModal=document.querySelector('.close-modal');
        const modalTabs=document.querySelectorAll('.modal-tab');
        const tabContents=document.querySelectorAll('.tab-content');
        const loginForm=document.getElementById('login-form');
        const signupForm=document.getElementById('signup-form');
        const submitEventForm=document.getElementById('submit-event-form');
        const eventsContainer=document.getElementById('events-container');
        const filterBtns=document.querySelectorAll('.filter-btn');
        const fadeElements=document.querySelectorAll('.fade-in');

        /* AJOUT : suppression du tableau statique events */
        /* const events=[...]  SUPPRIME */

        /* initialisation globale */
        document.addEventListener('DOMContentLoaded',()=>{
            initMap();            // <-- carte
            renderEvents();       // <-- agenda dynamique
            setupScrollAnimations();
        });

        /* AJOUT : récupération depuis Supabase */
        async function getEvents(type='all'){
            let q = supabase.from('events').select('*').order('starts_at',{ascending:true});
            if(type!=='all') q=q.eq('type',type);
            const { data, error } = await q;
            if(error){console.error(error);return []}
            return data;
        }
        async function renderEvents(type='all'){
            const events=await getEvents(type);
            eventsContainer.innerHTML='';
            if(events.length===0){eventsContainer.innerHTML='<p>Aucun événement trouvé</p>';return}
            events.forEach(ev=>{
                const date=new Date(ev.starts_at);
                const formatted=date.toLocaleDateString('fr-FR',{weekday:'long',year:'numeric',month:'long',day:'numeric',hour:'2-digit',minute:'2-digit'});
                const card=document.createElement('div');
                card.className='event-card fade-in';card.setAttribute('data-type',ev.type);
                card.innerHTML=`
                    <img src="${ev.image_url || 'https://via.placeholder.com/220x120'}" alt="${ev.title}" class="event-img">
                    <div class="event-content">
                        <span class="event-date">${formatted}</span>
                        <h3 class="event-title">${ev.title}</h3>
                        <p class="event-location"><i class="fas fa-map-marker-alt"></i> ${ev.location}</p>
                        ${ev.ticket_url ? `<a href="${ev.ticket_url}" target="_blank" class="btn">Billetterie</a>` : ''}
                        ${ev.facebook_url ? `<a href="${ev.facebook_url}" target="_blank" class="btn"><i class="fab fa-facebook-f"></i></a>` : ''}
                    </div>`;
                eventsContainer.appendChild(card);
            });
            setupScrollAnimations();
        }
        /* FIN AJOUT */

        const toggleMenu=()=>{hamburger.classList.toggle('active');navLinks.classList.toggle('active')};
        const handleScroll=()=>{
            if(window.scrollY>50){header.classList.add('scrolled')}else{header.classList.remove('scrolled')}
            if(hamburger.classList.contains('active')){hamburger.classList.remove('active');navLinks.classList.remove('active')}
        };
        const openModal=()=>{authModal.style.display='flex';document.body.style.overflow='hidden'};
        const closeAuthModal=()=>{authModal.style.display='none';document.body.style.overflow='auto'};
        const switchTab=e=>{
            const tabId=e.target.getAttribute('data-tab');
            modalTabs.forEach(t=>t.classList.remove('active'));e.target.classList.add('active');
            tabContents.forEach(c=>c.classList.remove('active'));document.getElementById(`${tabId}-tab`).classList.add('active');
        };
        loginBtn.addEventListener('click',openModal);
        closeModal.addEventListener('click',closeAuthModal);
        modalTabs.forEach(tab=>tab.addEventListener('click',switchTab));

        /* AJOUT : connexion / inscription via Supabase */
        loginForm.addEventListener('submit',async(e)=>{
            e.preventDefault();
            const { error } = await supabase.auth.signInWithPassword({
                email: document.getElementById('login-email').value,
                password: document.getElementById('login-password').value
            });
            if(error){alert(error.message);return}
            alert('Connexion réussie');
            closeAuthModal();
            loginBtn.textContent='Mon compte';
        });
        signupForm.addEventListener('submit',async(e)=>{
            e.preventDefault();
            const { error } = await supabase.auth.signUp({
                email: document.getElementById('signup-email').value,
                password: document.getElementById('signup-password').value
            });
            if(error){alert(error.message);return}
            alert('Inscription réussie !');
            closeAuthModal();
            loginBtn.textContent='Mon compte';
        });
        /* FIN AJOUT */

        /* AJOUT : soumission d’événement vers Supabase + upload image */
        submitEventForm.addEventListener('submit',async(e)=>{
            e.preventDefault();
            const fd=new FormData(submitEventForm);
            const payload={
                title: fd.get('event-title'),
                starts_at: fd.get('event-date'),
                location: fd.get('event-location'),
                type: fd.get('event-type'),
                description: fd.get('event-description'),
                ticket_url: fd.get('event-ticket') || null,
                facebook_url: fd.get('event-facebook') || null
            };
            const imgFile=document.getElementById('event-image').files[0];
            if(imgFile){
                const fileName=`${Date.now()}-${imgFile.name}`;
                const {error:upErr}=await supabase.storage.from('teufindoc').upload(fileName,imgFile);
                if(upErr){alert(upErr.message);return}
                payload.image_url=supabase.storage.from('VOTRE_BUCKET_NAME').getPublicUrl(fileName).data.publicUrl;
            }
            const {error}=await supabase.from('events').insert([payload]);
            if(error){alert(error.message);return}
            alert('Événement ajouté !');
            submitEventForm.reset();
            renderEvents();
        });
        /* FIN AJOUT */

        filterBtns.forEach(btn=>btn.addEventListener('click',filterEvents));
        window.addEventListener('scroll',handleScroll);
        window.addEventListener('click',e=>{if(e.target===authModal)closeAuthModal()});

        /* AJOUT : suppression définition filterEvents (utilise renderEvents) */
        function filterEvents(e){
            const filter=e.target.getAttribute('data-filter');
            filterBtns.forEach(b=>b.classList.remove('active'));e.target.classList.add('active');
            renderEvents(filter);
        }
        /* FIN AJOUT */

        function setupScrollAnimations(){
            const faders=document.querySelectorAll('.fade-in');
            const obs=new IntersectionObserver(entries=>{
                entries.forEach(entry=>{
                    if(entry.isIntersecting){entry.target.classList.add('appear');obs.unobserve(entry.target);}
                });
            },{threshold:.15,rootMargin:'0px 0px -100px 0px'});
            faders.forEach(f=>obs.observe(f));
        }
        document.querySelectorAll('a[href^="#"]').forEach(a=>{
            a.addEventListener('click',function(e){
                if(this.getAttribute('href')==='#')return;
                e.preventDefault();
                const target=document.querySelector(this.getAttribute('href'));
                if(target){
                    const offset=header.offsetHeight;
                    window.scrollTo({top:target.offsetTop-offset,behavior:'smooth'});
                    if(hamburger.classList.contains('active')){hamburger.classList.remove('active');navLinks.classList.remove('active');}
                }
            });
        });
        hamburger.addEventListener('click',toggleMenu);

        /* =========================================================
           MENU DEROULANT - SOUMETTRE UN EVENEMENT
           --------------------------------------------------------- */
        const toggleBtn  = document.getElementById('toggle-form-btn');
        const formWrapper = document.getElementById('event-form-wrapper');

        toggleBtn.addEventListener('click', () => {
            const isOpen = formWrapper.style.display !== 'none';
            formWrapper.style.display = isOpen ? 'none' : 'block';
            toggleBtn.innerHTML = isOpen
                ? '<i class="fas fa-plus-circle"></i> Soumettre un événement'
                : '<i class="fas fa-minus-circle"></i> Fermer le formulaire';
        });
    </script>
</body>
</html>